<!DOCTYPE html>
<html>

<head>
<title>Senior Project</title>
<cfheader name="Content-Type" value="application/rss+xml">
<link rel="stylesheet" href="{{=css}}" type="text/css" media="all" />
<link rel="stylesheet" href="{{=URL('static','css/jquery.datatables.css')}}" type="text/css" media="all" />
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
<link rel="stylesheet" href="{{=URL('static','jqTree/jqtree.css')}}"/>
{{include 'web2py_ajax.html'}}
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js" type="text/javascript"></script>
  <script src="{{=URL('static','js/jquery.js')}}"></script> 
  <script src="{{=URL('static','js/jquery.ui.accordion.js')}}"></script> 
  <script src="{{=URL('static','js/jquery.datatables.js')}}"></script> 
  <script src="{{=URL('static','js/jquery-ui-1.9.0.custom.min.js')}}"></script> 
  <script src="{{=URL('static','jqTree/tree.jquery.js')}}"></script>
<script type="text/javascript">
$(document).ready(function(){

var data = [];


{{for index  in range(len(projects)):}}
  data.push({label:"Project "+"{{=T(projects[index].name)}}",id:{{=int(projects[index].id)}}, children:[
  {label:"<a href='{{=URL('default','newsfeed',vars=dict(formType='NewsFeed',projectNum=projects[index].projNum))}}'>News Feed</a>"},
  {label:"<a href='{{=URL('default','formtable',vars=dict(formType='RFI',projectNum=projects[index].projNum))}}'>RFIs</a>"},
  {label:"<a href='{{=URL('default','formtable',vars=dict(formType='Submittal',projectNum=projects[index].projNum))}}'>Submittals</a>"},
  {label:"<a href='{{=URL('default','formtable',vars=dict(formType='CCD',projectNum=projects[index].projNum))}}'>CCDs</a>"},
  {label:"<a href='{{=URL('default','formtable',vars=dict(formType='ProposalRequest',projectNum=projects[index].projNum))}}'>Proposal Requests</a>"},
  {label:"<a href='{{=URL('default','formtable',vars=dict(formType='Proposal',projectNum=projects[index].projNum))}}'>Proposals</a>"},
  {label:"<a href='{{=URL('default','formtable',vars=dict(formType='MeetingMinutes',projectNum=projects[index].projNum))}}'>Meeting Minutes</a>"}, 
  {label:"<a href='{{=URL('default','formtable',vars=dict(formType='Photo',projectNum=projects[index].projNum))}}'>Photos</a>"} ]});
  {{pass}} 

;


$(function() {
    $('#projectsidebar').tree({
        data: data,
        autoEscape:false
    });
    var node = $('#projectsidebar').tree('getNodeById', {{=int(request.vars.projectNum[-1])}});
$('#projectsidebar').tree('openNode', node);
});

$('#projectsidebar').bind(
    'tree.click',
    function(event) {
        // The clicked node is 'event.node'
        var node = event.node;
        $('#projectsidebar').tree('toggle', node);
    }
);

{{if fullTable==True:}}
$("#content table").dataTable(
  );
{{pass}}


});


</script>

</head>

<body>
<div class="flash">{{=response.flash or ''}}</div>
   {{=header}}
    <hr>
    <div id="projectsidebar">
    </div>
    <div id="newsfeed">
       <table border='5px'>
          {{for rss in entries:}}
          <tr>
            <td id='creator'>{{=T(rss.creator)}}</td>
            <td id='created_on'>{{=T(str(rss.created_on))}}</td>
          </tr>
          <tr>
            <td id='descrip'>{{=T(rss.description)}}</td>            
          </tr>
          {{pass}} 
       </table>
    </div>
   
    {{include "adminSidebar.html"}}

    {{=footer}}
</body>
</html>
